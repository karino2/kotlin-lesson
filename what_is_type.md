---
title: "型とは何か？"
layout: page
---
kotlinでは型が重要。けれど型とは何か、というのはなかなか初心者にわかりやすく説明されていない事が多い。
そこでここでは、プログラム初心者向けに型とはなにかという説明をしてみたい。

けれど、型とは何か、というのはなかなか説明が難しい。
それよりも、ある程度慣れて、なんとなく「こういうものか」と思うようになる類のものと思う。

そこでここではグダグダと説明を書くけれど、ある程度型を使うようになって「こういうものか」と思えるようになったら、ここに書いた説明は忘れてOKです。
あくまでそう思えるようになるまでの自転車の補助輪のようなものという事で。

以下いくつか、型とは何か、みたいな事を、比喩も交えて書いてみます。

## 空手の型よりはクッキーの型に近い

型、というと空手の型を思い浮かべる人も多いと思うけれど、それよりはクッキーの型とか型番の型に近い。

クッキーの型というのは星とかハートとかの型で、あれでくり抜いてその形のクッキーをどんどん作っていくようなもの。

型番というのは自転車とか車とかの型番とかの事で、あれもプログラムの型に近い。

## プログラムとはデータとそれに対する処理である

プログラムを、以下の２つに分けて考える、という考え方がある。

1. データ
2. データに対する処理

プログラムとは「データとそれに対する処理である」と考える事が出来る。

データとは、1とか2とか"Hello World"とかそういったもの。

処理とは足したり引いたり連結したり空白で２つに分けたり、といった事。
このように考えた時のデータについての何かが型と言える。
以下見ていきましょう。

## ゲームに例えると「対戦格闘」が型、「ストIIダッシュ」や「真サム」がデータ

ゲームの例を考えてみる。例えば「対戦格闘」などは型と言える。
一方で「ストIIダッシュ」とか「スパIIX」とか「ガロスペ」とか「真サム」などはデータと言える。

「RPG」なども型と言える。一方ドラクエIIIとかFF4などはデータと言える。

RPGとかシミュレーションとか対戦格闘とか、そういうのが型。

また、「カプコンのゲーム」と「SNKのゲーム」なども型と言える。
分類の仕方はいろいろありえて、解こうとしている問題に合わせて自分で分類を考えて作っていくのがプログラムの重要な一部だ。

## 型とはネジ穴とドライバーにおけるネジ穴の形のようなもの

ドライバーにプラスとマイナスがある。
これは、プラスのネジにマイナスのドライバーを使ってしまわないため、わざと形を変えてある。
型もこれに似ている。

プログラムの部品と部品を組み合わせる時に、形があっているもの同士しか組み合わせられないようにするための何かが型。
型があっていると部品同士はつながる。
型が違っているとつながらない。

そしてつながってはいけない部品同士が間違ってつながらないように、型をいろいろ作っていく。

先ほどのゲームの例に戻ると、「対戦格闘」なら「ダイアグラム」を作る事が出来る。
一方で「RPG」でダイアグラムを作る事は出来ない。

「RPG」なら「ダンジョンのマップ」を作る事が出来る。けれど「対戦格闘」の「ダンジョンのマップ」を作る事は出来ない。

こうした型ごとに出来る処理をいろいろ作る事が出来て、
それは型が同じデータに対してだけ行える。

以下のような処理を考えてみる。

{% capture code1 %}
fun main() {
  val a = 1
  val b = 2
  val c = a-b
  println("a-bは$c")

  val d = "abc"
  val e = "def"
  val f = d+e

  println("d+eは$f")
}
{% endcapture %}
{% include kotlin_quote.html body=code1 %}

aとbは数字なので、引き算が出来る。

一方、dとeは文字列なので足す事は出来るが、数字の足すとはちょっと意味が違う（文字をつなげる事になる）。
なにより、引く事は出来ない。d-eとは書けない（書いてみてエラーになるのを確かめよう！）。

型とはこのように、ある「処理」とつなげられるかどうかを表すための、間違ったものがつながらないようにちょっと特別な形をつける事である。
星型ドライバー、プラスドライバー、マイナスドライバーなどのようにわざと形を変える事で、ドライバーとネジの組み合わせがあっているものだけが回せるようにする。

## 変数には（ほとんど）すべてに型がある

変数には、（genericsの例外を除いて）全てに型があります。
genericsの話はこのシリーズでは多分しないので、全てに型がある、と思っていてよろしい。

### 変数を最初に定義するところで型が決まる。

以下のa, bを考えてみましょう。

```kotlin
val a = 1
val b = "abc"
```

このように最初にvalで変数を定義するところで、イコールの右の値から型が推測して決まります。

この場合aはIntという型、bはStringという型になります。
とりあえずIntとかStringが何か、というのは後述するとして、ここでは全ての変数に型というのが勝手についている、
という事が大切です。

なお、推測に任せずに自分で指定する事も出来ます。
これは以下のようにコロン（:）で変数の名前の後ろに書きます。

```kotlin
val a: Int = 1
val b: String = "abc"
```

この時点では「何を言っているんだお前は？」という感じだと思いますが、
関数が出てくるあたりでこの辺は意味が出てくるので、
今は「意味わからんな」、と思いながら進んでください。

### 型があった変数にしかデータは入れられない

「カプコンのゲーム」にストIIやエイプレは入れられるが、ガロスペや真サムは入れられない。
同様に、数字の型にしか数字は入れられず、文字列の型に数字を入れようとするとコンパイルエラーとなる。

変更する変数の場合はvarで定義するという話でした。
そこで以下のように書くと、これはコンパイルエラーになります。

{% capture code2 %}
fun main() {
  var a = 1
  
  a = "abc" // コンパイルエラー！

  println(a)
}
{% endcapture %}
{% include kotlin_quote.html body=code2 %}

## データにも型がある（と思って良い）

`1`と言ったらIntです。`123`もIntです。
`"abc"`と言ったら文字列です。

このように、データにも型があります。

上級者にとっては数字の即値の型というのは結構ややこしい話題なのだけれど、このシリーズで扱うレベルならデータには型がある、と思ってしまってOK。

## 最初に覚えておくべき型

ここらへんで、実際の型をいくつか見てみよう。
最初にプログラムをしてく段階で覚えていた方がいい型というのがいくつかある。

他の言語を知っている人は、[Basic types - Kotlin Documentation](https://kotlinlang.org/docs/kotlin-tour-basic-types.html)などで一気に学んでもいいのだけれど、
型というのを初めて見た人にはこれは多すぎる。
だいたいほとんど使わない。

という事で、最初の段階で覚えた方がいい型だけをとりあげて、それを簡単に説明します。

| 型の名前 | 説明 |
| ---- | ---- |
| Int | 数値のうち、整数の型 |
| Double | 数値のうち、小数も使える型 |
| String | 文字列 |
| Boolean | trueとfalseの２つのどちらかだけの型 |
| TextView, Button, EditText, CheckBox | 最初にやった奴 |

### IntとDouble

数値には二種類あります。整数だけのIntと、小数も使えるDoubleです。
Doubleという名前にはほとんど意味は無くて、歴史的な事情でこういう名前になっている。

整数は全然数学やってないわ〜って人は忘れてるかもしれないので簡単に説明しておくと、
整数は整数を理解するよりも、小数から見る方がいい。

小数とは1.5とか2.7とかの小数点がある奴。
整数とは、小数では無い数。つまり1とか3とか2とかそういうの。
基本的にはこの２つに別々の型がある。

小数も使えるDoubleと小数は使えないIntがあるなら、全部Doubleでいいのでは？
と思うかもしれないけれど、
CPUというのは小数を扱うのがめっちゃ下手なので、プログラムは出来るだけIntを使う方がいい。
という事で不要ならIntを使おう。

けれど、みんなで割り勘する時のお金を計算する、
とか、一週間の体重の平均を計算する、とか、
消費税の計算をする、とか、そういう時は小数も使いたくなるので、
Doubleも知っておいた方がいい。

なお、`1`とか`123`はIntだけど、`1.5`とか`1.0`とか`123.0`などはDoubleになります。
`1`と`1.0`が別の型になる、というのは慣れてない人には驚くかもしれないけれど、そういうものです。

以下、この違いが分かる例を見てみよう。

{% capture int_double %}
fun main() {
  println(5/2) // これはIntなので2.5じゃなくて切り捨てて2になる
  println(5.0/2.0) // これはDoubleなので2.5になる
}
{% endcapture %}
{% include kotlin_quote.html body=int_double %}

### Stringと文字列

プログラム初心者が割とつまづく概念に文字列がある。
文字列とはようするに文字の列、つまり単なるテキストなのだけれど、
こればっかりは慣れるしか無いので、以下見ていく。

`"abc"`とか`"ほげほげ"`とか、ダブルクオートで囲んだテキストはString、という型になる。
Stringはprintlnで表示する事が出来る。

{% capture mojiretu %}
fun main() {
  val mojiretu = "くにへかえるんだな おまえにもかぞくがいるだろう"
  println(mojiretu)
}
{% endcapture %}
{% include kotlin_quote.html body=mojiretu %}

上のコードで、mojiretuはString型となる。

### Boolean型

Booleanとはtrueとfalseだけの型です。
そんな型なんて大して使わ無さそうに思うけれど、比較などの条件などの結果が全部これになります。

{% capture bool_code %}
fun main() {
  val result = ("ほげ" == "いか")
  println(result)
}
{% endcapture %}
{% include kotlin_quote.html body=bool_code %}

このresultはBoolean型となります。
`==`の他に`>`とかもBoolean型になります、
辞書の中に要素があるか、などを調べる関数もBoolean型となります。

関数の話はあとでするので良く分からなくてもいいですが、とにかくif文の条件になるようなものは全部Boolean型になる、という事から、
Boolean型は結構出てきます。

### TextView, Button, EditTextなどの型

findViewByIdで渡していたこれらは、全て型です。
現時点では「これらも型だ」という事だけ頭の片隅に入れておけばOKです。
